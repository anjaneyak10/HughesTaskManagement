<main class="main-content">
  <mat-card>
    <mat-card-header>
      <mat-icon mat-card-avatar class="profileTitle">account_circle</mat-icon>
      <mat-card-title class="cardTitle">Modify Tasks</mat-card-title>
    </mat-card-header>
    <ng-container *ngIf="spinner">
      <div class="spinner-container">
        <mat-spinner></mat-spinner>
      </div>
    </ng-container>
    <ng-container *ngIf="!spinner">
      <mat-card-content>
        <br/>
        <!-- Search Bar with Button -->
        <div class="search-container">
          <mat-form-field appearance="outline" class="search-field">
            <mat-label>Search Task Name</mat-label>
            <input matInput [(ngModel)]="searchTerm" placeholder="Search">
            <button mat-icon-button matSuffix (click)="applyFilter()">
              <mat-icon>search</mat-icon>
            </button>
          </mat-form-field>
          <button mat-raised-button color="primary" class="search-button" (click)="applyFilter()">Search</button>
        </div>
        <br/><br/>
        <table mat-table [dataSource]="filteredTasks" class="mat-elevation-z8">
          <!-- Columns definition -->
          <ng-container matColumnDef="function_name">
            <th mat-header-cell *matHeaderCellDef [ngStyle]="{'background-color': '#21294f', 'color': '#ffffff'}">Function Name</th>
            <td mat-cell *matCellDef="let task">{{ task.function_name }}</td>
          </ng-container>
          <ng-container matColumnDef="taskName">
            <th mat-header-cell *matHeaderCellDef [ngStyle]="{'background-color': '#21294f', 'color': '#ffffff'}">Task Name</th>
            <td mat-cell *matCellDef="let task">{{ task.taskName }}</td>
          </ng-container>
          <ng-container matColumnDef="weightage">
            <th mat-header-cell *matHeaderCellDef [ngStyle]="{'background-color': '#21294f', 'color': '#ffffff'}">Weightage</th>
            <td mat-cell *matCellDef="let task">{{ task.weightage }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="['function_name', 'taskName', 'weightage']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['function_name', 'taskName', 'weightage']; let i = index" [ngStyle]="{'background-color': i % 2 === 0 ? '#f0f0f0' : '#ffffff', 'cursor': 'pointer'}" (click)="onRowClick(row)"></tr>
        </table>
      </mat-card-content>
    </ng-container>
  </mat-card>
</main>